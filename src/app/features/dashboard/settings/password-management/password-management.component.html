<div>
    <h2 class="text-xl font-semibold text-gray-800">Password management</h2>
    <hr class="mt-6 mb-8" style="border-color: #dedede;" />

    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="space-y-8">
        <div class="grid grid-cols-3 items-center">
            <label for="currentPassword" class="text-gray-700 font-medium"
                >Current password</label
            >
            <div class="col-span-2 relative">
                <input
                    [type]="hideCurrentPassword ? 'password' : 'text'"
                    id="currentPassword"
                    formControlName="currentPassword"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-300"
                />
                <button
                    type="button"
                    (click)="hideCurrentPassword = !hideCurrentPassword"
                    class="absolute inset-y-0 right-0 flex items-center px-4 text-gray-600"
                >
                    <mat-icon class="text-gray-500">
                        {{
                            hideCurrentPassword
                                ? "visibility_off"
                                : "visibility"
                        }}
                    </mat-icon>
                </button>
            </div>
        </div>

        <div class="grid grid-cols-3 items-start">
            <label for="newPassword" class="text-gray-700 font-medium mt-2"
                >New password</label
            >
            <div class="col-span-2">
                <div class="relative">
                    <input
                        [type]="hideNewPassword ? 'password' : 'text'"
                        id="newPassword"
                        formControlName="newPassword"
                        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-300"
                    />
                    <button
                        type="button"
                        (click)="hideNewPassword = !hideNewPassword"
                        class="absolute inset-y-0 right-0 flex items-center px-4 text-gray-600"
                    >
                        <mat-icon class="text-gray-500">
                            {{
                                hideNewPassword
                                    ? "visibility_off"
                                    : "visibility"
                            }}
                        </mat-icon>
                    </button>
                </div>
                <div
                    *ngIf="f['newPassword'].touched && f['newPassword'].errors"
                    class="mt-2 p-3 bg-gray-100 rounded-md text-sm text-gray-600"
                >
                    <p *ngIf="f['newPassword'].errors?.['required']">
                        New password is required.
                    </p>
                    <p
                        *ngIf="f['newPassword'].errors?.['minlength'] || f['newPassword'].errors?.['pattern']"
                    >
                        Password must be at least 8 characters long containing
                        Uppercase, lowercase, numbers and symbols.
                    </p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-3 items-center">
            <label for="confirmPassword" class="text-gray-700 font-medium"
                >Confirm password</label
            >
            <div class="col-span-2 relative">
                <input
                    [type]="hideConfirmPassword ? 'password' : 'text'"
                    id="confirmPassword"
                    formControlName="confirmPassword"
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-300"
                />
                <button
                    type="button"
                    (click)="hideConfirmPassword = !hideConfirmPassword"
                    class="absolute inset-y-0 right-0 flex items-center px-4 text-gray-600"
                >
                    <mat-icon class="text-gray-500">
                        {{
                            hideConfirmPassword
                                ? "visibility_off"
                                : "visibility"
                        }}
                    </mat-icon>
                </button>
                <div
                    *ngIf="f['confirmPassword'].touched && passwordForm.errors?.['passwordMismatch']"
                    class="mt-2 p-3 bg-gray-100 rounded-md text-sm text-gray-600"
                >
                    Passwords do not match.
                </div>
            </div>
        </div>

        <div class="flex justify-end">
            <button
                type="submit"
                [disabled]="passwordForm.invalid"
                class="px-6 py-2.5 bg-gray-800 text-white font-semibold rounded-md hover:bg-gray-700 disabled:bg-gray-400 disabled:cursor-not-allowed"
            >
                Update password
            </button>
        </div>
    </form>
</div>
