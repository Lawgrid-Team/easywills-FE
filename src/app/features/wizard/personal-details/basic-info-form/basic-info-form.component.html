<div>
    <h2 class="text-4xl font-bold text-easywills-black font-DM_Serif mb-8">
        Tell us about you.
    </h2>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-6">
        <div>
            <label
                class="text-easywills-black flex items-center mb-2"
                for="title"
                >Select your title</label
            >
            <mat-form-field appearance="outline" class="w-full">
                <!-- <mat-label>Select your title</mat-label> -->
                <mat-select formControlName="title" placeholder="Title">
                    <mat-option value="mr">Mr</mat-option>
                    <mat-option value="mrs">Mrs</mat-option>
                    <mat-option value="miss">Miss</mat-option>
                    <mat-option value="ms">Ms</mat-option>
                    <mat-option value="dr">Dr</mat-option>
                    <mat-option value="prof">Prof</mat-option>
                </mat-select>
                <mat-error *ngIf="form.get('title')?.hasError('required')">
                    Title is required
                </mat-error>
            </mat-form-field>
        </div>

        <div>
            <label class="flex items-center mb-2 text-easywills-black">
                What is your full legal name?
                <mat-icon class="ml-2 text-sm">info_outline</mat-icon>
            </label>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-3">
                <mat-form-field appearance="outline">
                    <!-- <mat-label>First name</mat-label> -->
                    <input
                        matInput
                        formControlName="firstName"
                        placeholder="First name"
                    />
                    <mat-error
                        *ngIf="form.get('firstName')?.hasError('required')"
                    >
                        First name is required
                    </mat-error>
                    <mat-error
                        *ngIf="form.get('firstName')?.hasError('minlength')"
                    >
                        First name must be at least 2 characters
                    </mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <!-- <mat-label>Last name</mat-label> -->
                    <input
                        matInput
                        formControlName="lastName"
                        placeholder="Last name"
                    />
                    <mat-error
                        *ngIf="form.get('lastName')?.hasError('required')"
                    >
                        Last name is required
                    </mat-error>
                    <mat-error
                        *ngIf="form.get('lastName')?.hasError('minlength')"
                    >
                        Last name must be at least 2 characters
                    </mat-error>
                </mat-form-field>
            </div>

            <mat-form-field appearance="outline" class="w-full">
                <!-- <mat-label>Other Given Name(s)</mat-label> -->
                <input
                    matInput
                    formControlName="otherNames"
                    placeholder="Other Given Name(s)"
                />
            </mat-form-field>
        </div>

        <div class="flex items-start space-x-2">
            <mat-checkbox color="primary" formControlName="hasUsedOtherNames">
                I have used other names in the past (e.g Alias, Nickname,
                previously married, etc)?
            </mat-checkbox>
        </div>

        <div *ngIf="form.get('hasUsedOtherNames')?.value">
            <mat-form-field appearance="outline" class="w-full">
                <!-- <mat-label>Full name</mat-label> -->
                <input
                    matInput
                    formControlName="otherFullName"
                    placeholder="Full name"
                />
                <mat-error
                    *ngIf="form.get('otherFullName')?.hasError('required')"
                >
                    Other full name is required
                </mat-error>
            </mat-form-field>
        </div>

        <!-- Help Box - positioned independently to not affect button layout -->
        <div
            *ngIf="showHelpBox"
            class="fixed bottom-40 right-8 z-50 w-72 bg-white rounded-lg border border-gray-200 overflow-hidden transform transition-all duration-300 ease-out"
            style="animation: slideUp 0.3s ease-out"
        >
            <!-- Help Box Header -->
            <div class="px-4 py-3 border-b border-gray-200 text-center">
                <h3 class="text-base font-medium text-gray-800">FAQs</h3>
            </div>

            <!-- Help Box Content -->
            <div class="pt-1 px-4 pb-4 max-h-80 overflow-y-auto">
                <mat-accordion class="help-accordion">
                    <mat-expansion-panel class="help-panel mb-3">
                        <mat-expansion-panel-header>
                            <mat-panel-title
                                class="text-xs font-medium text-gray-700"
                            >
                                What personal information is required?
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="text-xs text-gray-600 leading-relaxed pt-1">
                            We need your full legal name, date of birth, current
                            address, and contact information. This ensures your
                            will is legally valid and we can reach you if
                            needed.
                        </div>
                    </mat-expansion-panel>

                    <mat-expansion-panel class="help-panel">
                        <mat-expansion-panel-header>
                            <mat-panel-title
                                class="text-xs font-medium text-gray-700"
                            >
                                Is my personal information secure?
                            </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="text-xs text-gray-600 leading-relaxed pt-1">
                            Yes, all your personal information is encrypted and
                            stored securely. We follow industry-standard
                            security practices to protect your data and privacy.
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>

                <!-- Talk to someone section -->
                <div class="border-t border-gray-200 pt-3 mt-3">
                    <button
                        type="button"
                        class="w-4/5 mx-auto block bg-[#444444] text-white text-xs font-semibold py-2 px-4 rounded-lg hover:bg-opacity-90 transition-colors duration-200"
                    >
                        Talk to someone
                    </button>
                </div>
            </div>
        </div>

        <!-- Help Button Container - separate and fixed position -->
        <div class="fixed bottom-24 right-8 z-50">
            <button
                type="button"
                (click)="toggleHelpBox()"
                class="flex items-center border border-foreground rounded-md px-4 py-2 bg-[#efefef] ring-2 ring-easywills-black hover:bg-gray-200 transition-all duration-200 cursor-pointer"
            >
                <span class="mr-2">Need help?</span>
                <mat-icon>question_answer</mat-icon>
            </button>
        </div>
    </form>
</div>
